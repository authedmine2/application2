/*
 * Copyright (C) 2018 IKDG All rights reserved.
 */
(function(){window.notify=function(){function q(a){a||(a="");return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(a,b,c){this.options=c;this.id=++r;this.element=document.createElement("div");this.element.className=this.noticeClass;this.element.setAttribute(this.type,"");this.typeClass&&(this.element.className+=" "+this.typeClass);this.closeButton&&(c=document.createElement("div"),c.className=this.closeClass,c.innerHTML="&times;",
c.addEventListener("click",function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&!0!==a.cancelBubble&&(a.cancelBubble=!0);this.hiding||(this.onclose&&this.onclose(),this.hide())}.bind(this),!1),this.element.appendChild(c));b&&(c=document.createElement("div"),c.className=this.titleClass,c.innerHTML=b,this.element.appendChild(c));a&&(b=document.createElement("div"),b.className=this.messageClass,b.innerHTML=this.escapeHTML?q(a):a,this.element.appendChild(b));if(this.progressBar){var d=
document.createElement("div");d.className=this.progressClass;this.progressBar=new m(this.timeOut,function(a){d.style.width=100-a+"%"});this.element.appendChild(d)}this.closeOnHover&&(this.element.addEventListener("mouseover",n(function(){this.progressBar&&(this.progressBar.stop(),this.progressBar.prc=100);clearTimeout(this.closeTimeOut)}.bind(this)),!1),this.element.addEventListener("mouseout",n(function(){!this.hiding&&(0<this.timeOut||0<this.extendedTimeOut)&&(this.progressBar&&(this.progressBar.duration=
this.extendedTimeOut,this.progressBar.start()),this.closeTimeOut=setTimeout(this.hide.bind(this),this.extendedTimeOut))}.bind(this)),!1));this.tapToDismiss&&this.element.addEventListener("click",this.hide.bind(this),!1);this.onclick&&this.element.addEventListener("click",this.onclick,!1);this.debug&&console.log(this)}function m(a,b){this.duration=a;this.onchange=b}function p(a){var b=performance.now();a.animId=requestAnimationFrame(function l(d){d=(d-b)/a.duration;1<d&&(d=1);a.draw(d);1>d?a.animId=
requestAnimationFrame(l):a.complete&&a.complete()})}function n(a){return function(b){b=b||window.event;for(var c=b.relatedTarget||b.srcElement;c&&c!==this;)c=c.parentNode;if(c!=this)return a.call(this,b)}}var r=0,f={},h={showDuration:300,timeOut:5E3,extendedTimeOut:1E3,hideDuration:1E3,type:"info",typeClass:"",containerClass:"notice-container",positionClass:"notice-top-right",noticeClass:"notice",titleClass:"notice-title",messageClass:"notice-message",progressClass:"notice-progress",closeClass:"notice-close-button",
tapToDismiss:!0,closeOnHover:!0,closeButton:!1,progressBar:!1,onshow:null,onclick:null,onclose:null,onhide:null,newOnTop:!1,escapeHTML:!1,debug:!1},g={},e=document.createElement("div");k.prototype={constructor:k,__proto__:h,visible:!1,set options(a){for(var b in a)void 0!==this[b]&&(this[b]=a[b])},show:function(){e.parentNode||(document.body.appendChild(e),e.className=this.containerClass+" "+this.positionClass);this.newOnTop&&e.childNodes.length?e.insertBefore(this.element,e.firstChild):e.appendChild(this.element);
f[this.id]=this;var a=this;p({draw:function(b){a.element.style.opacity=.8*b},duration:this.showDuration,complete:function(){a.element.style.removeProperty("opacity");a.visible=!0;a.onshow&&a.onshow()}});this.timeOut&&(this.closeTimeOut=setTimeout(this.hide.bind(this),this.timeOut),this.progressBar&&this.progressBar.start())},hide:function(){if(!this.hiding){this.hiding=!0;clearTimeout(this.closeTimeOut);var a=this;p({draw:function(b){a.element.style.opacity=.8*(1-b)},duration:this.hideDuration,complete:function(){a.element.style.removeProperty("opacity");
a.visible=!1;a.onhide&&a.onhide();a.remove();delete a.hiding}})}},remove:function(){clearTimeout(this.closeTimeOut);this.progressBar&&this.progressBar.stop();delete f[this.id];e.removeChild(this.element);e.firstChild||e.parentNode.removeChild(e)}};m.prototype={constructor:m,__proto__:null,get prc(){return this.prc},set prc(a){this._prc=a;this.onchange(a)},onchange:function(){},start:function(){var a=this,b=performance.now();a.id=requestAnimationFrame(function l(d){d=(d-b)/a.duration*100;100<d&&(d=
100);a.prc=d;100>d&&(a.id=requestAnimationFrame(l))})},stop:function(){cancelAnimationFrame(this.id)}};return{setOption:function(a,b){void 0!==h[a]&&(h[a]=b)},setOptions:function(a){for(var b in a)this.setOption(b,a[b])},remove:function(a){if(!a){for(var b in f);a=b}if(b=f[a])delete f[b.id],b.hide()},clear:function(){for(var a in f)f[a].hide()},addType:function(a,b){if(this[a])return!1;g[a]={};this.setTypeOptions(a,b);this[a]=function(b,d,e){e||(e={});for(var c in g[a])void 0!==e[c]||(e[c]=g[a][c]);
b=new k(b,d,e);b.show();return b.id};return!0},getTypeOptions:function(a){var b={},c;for(c in g[a])b[c]=g[a][c];return b},setTypeOptions:function(a,b){if(!g[a])return!1;for(var c in b)void 0!==h[c]&&(g[a][c]=b[c]);return!0}}}();notify.addType("success",{type:"success"});notify.addType("info",{type:"info"});notify.addType("warning",{type:"warning",timeOut:0,closeOnHover:!1});notify.addType("error",{type:"error",timeOut:0,tapToDismiss:!1,closeOnHover:!1,closeButton:!0})})();
